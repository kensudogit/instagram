# Instagram 自動化ツール

このプロジェクトは、Instagram Graph APIを使用してさまざまなInstagramの活動を自動化するためのツールセットを提供します。ツールには以下が含まれます：

1. **フィード投稿の自動化**: 複数のメディアアイテムをInstagramフィードに自動的に投稿します。
2. **ストーリー投稿の自動化**: 複数のメディアアイテムをInstagramストーリーとして自動的に投稿します。
3. **ダイレクトメッセージの自動化**: 複数のユーザーにダイレクトメッセージを送信します。
4. **フォローの自動化**: 複数のユーザーをフォローします。
5. **いいねの自動化**: 複数の投稿に「いいね」を送信します。
6. **コメントの自動化**: 複数の投稿にコメントを送信します。

## 導入手順

1. リポジトリをクローンします。
   ```bash
   git clone <repository-url>
   ```

2. 必要なPythonパッケージをインストールします。
   ```bash
   pip install -r requirements.txt
   ```

3. `.env`ファイルを作成し、以下の環境変数を設定します。
   ```
   INSTAGRAM_ACCESS_TOKEN=your_access_token
   INSTAGRAM_USER_ID=your_user_id
   DB_NAME=your_db_name
   DB_USER=your_db_user
   DB_PASSWORD=your_db_password
   DB_HOST=localhost
   DB_PORT=5432
   ```

4. Google Sheets APIの認証情報を設定します。`credentials.json`ファイルをプロジェクトのルートディレクトリに配置します。

5. Flaskサーバーを起動します。
   ```bash
   python devlop/instagram/feed_post_automation.py
   ```

## 機能内容

- **メディアのアップロード**: 指定したURLのメディアをInstagramに投稿します。キャプションを追加することも可能です。
- **スケジュール投稿**: 指定した時間にメディアを自動で投稿します。
- **一括投稿**: 複数のメディアを順次投稿します。
- **ストーリー投稿**: メディアをInstagramストーリーとして投稿します。
- **DM送信**: 指定したユーザーにダイレクトメッセージを送信します。
- **フォロー**: 指定したユーザーをフォローします。
- **いいね**: 指定した投稿に「いいね」を送信します。
- **コメント**: 指定した投稿にコメントを送信します。
- **データ登録**: Google Sheetsからデータを取得し、PostgreSQLに登録します。

## 実装された機能

このプロジェクトには以下の自動化機能が含まれています：

1. **フィード投稿の自動化**
   - 関数: `bulk_upload_media(media_urls, captions)`
   - 説明: 指定されたキャプションで複数のメディアアイテムをInstagramフィードに自動的に投稿します。エラーを処理し、失敗したアップロードをリトライします。

2. **ストーリー投稿の自動化**
   - 関数: `bulk_upload_stories(media_urls)`
   - 説明: 複数のメディアアイテムをInstagramストーリーとして自動的に投稿します。エラーハンドリングとリトライロジックを含みます。

3. **ダイレクトメッセージの自動化**
   - 関数: `bulk_send_dm(user_ids, message)`
   - 説明: 複数のユーザーにダイレクトメッセージを送信します。エラーハンドリングと失敗したメッセージのリトライを含みます。

4. **フォローの自動化**
   - 関数: `bulk_follow_users(user_ids)`
   - 説明: 複数のユーザーを自動的にフォローします。エラーハンドリングとリトライを含みます。

5. **いいねの自動化**
   - 関数: `bulk_like_posts(post_ids)`
   - 説明: 複数の投稿に自動的に「いいね」を送信します。エラーを処理し、失敗した試行をリトライします。

6. **コメントの自動化**
   - 関数: `bulk_comment_posts(post_ids, comments)`
   - 説明: 指定されたコメントで複数の投稿にコメントを送信します。エラーハンドリングとリトライロジックを含みます。

各関数はエラーを適切に処理し、成功するまでリトライするメカニズムを備えています。環境変数とAPI認証情報をセットアップ手順に従って設定してください。
